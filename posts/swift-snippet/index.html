<!doctype html><html lang=en-us><title>Swift Snippet | Blog by Frank</title><meta charset=utf-8><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZQ6YTCMN7"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XZQ6YTCMN7")}</script><meta name=twitter:card content="summary_large_image"><meta property="og:type" content="article"><meta property="og:title" content="Swift Snippet | Blog by Frank"><meta name=twitter:title content="Swift Snippet | Blog by Frank"><meta property="og:description" content="Swift Intro

Swift&mdash;一门智能型的编程语言"><meta property="og:url" content="https://yongfrank.github.io/posts/swift-snippet/"><meta property="og:site_name" content="Blog by Frank"><meta name=generator content="Hugo 0.154.5"><meta name=description content="Explorations, Reflections, and More on My Blog"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://yongfrank.github.io/css/index.css><link rel=canonical href=https://yongfrank.github.io/posts/swift-snippet/><link rel=alternate type=application/rss+xml href title="Blog by Frank"><link rel=stylesheet href=https://yongfrank.github.io/katex/katex.min.css><link rel="shortcut icon" href=favicon.ico><script defer src=https://yongfrank.github.io/katex/katex.min.js></script><script defer src=https://yongfrank.github.io/katex/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#578490><meta name=msapplication-TileColor content="#da532c"><head><script src=/js/MathJax/es5/tex-chtml.js></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6555780148434263" crossorigin=anonymous></script></head><header><a href=https://yongfrank.github.io/ class=title>Blog by Frank</a><nav><a href=/about/>About</a></nav></header><article><header><h1>Swift Snippet</h1><time datetime=2023-04-08T11:44:42+08:00>April 08, 2023</time></header><nav id=TableOfContents><ul><li><a href=#swift-intro>Swift Intro</a></li><li><a href=#common-problem>Common Problem</a><ul><li><a href=#safe-subsript>safe subsript</a></li></ul></li><li><a href=#uikit-preview>UIKit Preview</a><ul><li><a href=#swift-guard>Swift Guard</a></li></ul></li><li><a href=#swift-repl>Swift REPL</a></li><li><a href=#enum>Enum</a><ul><li><a href=#enumeration-and-structures>Enumeration and Structures</a></li><li><a href=#method-and-property>Method and Property</a></li><li><a href=#associated-value>Associated Value</a></li><li><a href=#protocol>Protocol</a></li><li><a href=#extesnsion>Extesnsion</a></li><li><a href=#generics>Generics</a></li><li><a href=#caseiterable>CaseIterable</a></li></ul></li><li><a href=#stride>Stride</a></li><li><a href=#lazy>Lazy</a></li><li><a href=#functionbuilder>functionBuilder</a></li><li><a href=#codable--nscoding>Codable & NSCoding</a></li><li><a href=#value-type-reference-type>Value type, Reference type</a></li><li><a href=#difference-between-struct-and-class>Difference Between Struct and Class</a><ul><li><a href=#q1-why-does-swift-have-both-classes-and-structs>Q1: Why does Swift have both classes and structs?</a></li><li><a href=#q2-why-do-classes-have-deinitializers-and-structs-dont>Q2: Why do classes have deinitializers and structs don’t?</a></li><li><a href=#override>override</a></li><li><a href=#class-var-static-var>class var, static var</a></li></ul></li><li><a href=#c-c-integration>C, C++ Integration</a><ul><li><a href=#cpp-integration>Cpp integration</a></li><li><a href=#dylib-for-xcode-project>dylib for Xcode project</a></li></ul></li></ul></nav><h2 id=swift-intro>Swift Intro</h2><blockquote><p><a href="https://developer.aliyun.com/article/254320?spm=a2c6h.13262185.profile.358.699e167e7REVuk">Swift&mdash;一门智能型的编程语言</a></p></blockquote><h2 id=common-problem>Common Problem</h2><h3 id=safe-subsript>safe subsript</h3><blockquote><p><a href=https://juejin.cn/post/7026271045652840461>5 个让 Swift 更优雅的扩展——Pt.1</a>
<a href="https://www.bilibili.com/video/BV1ZT4y1V7Rs/?share_source=copy_web&amp;vd_source=bf4952280cde801b178268abc99a7047">Swift 经常数组越界？教你一招，一劳永逸的解决数组越界的问题</a></p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>Array</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>subscript</span> (safe index: Int) -&gt; Element? {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>guard</span> index <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> index <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>self</span>.count <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>self</span>[index]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>values[safe: <span style=color:#ae81ff>2</span>] <span style=color:#75715e>// &#34;C&#34;</span>
</span></span><span style=display:flex><span>values[safe: <span style=color:#ae81ff>3</span>] <span style=color:#75715e>// nil</span>
</span></span></code></pre></div><h2 id=uikit-preview>UIKit Preview</h2><blockquote><p><a href=https://ruipfcosta.github.io/UIKitPreviewsGenerator-Website/index.html>UIKit Preview</a></p></blockquote><video style="max-width:100%;box-shadow:rgba(50,50,93,.25)0 50px 100px -20px,#000 0 30px 60px -30px" loop muted autoplay playsinline>
<source src=https://ruipfcosta.github.io/UIKitPreviewsGenerator-Website/assets/video/demo.mov></video><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>UIKit</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ViewController</span>: UINavigationController {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>viewDidLoad</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.viewDidLoad()
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Do any additional setup after loading the view.</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> text = UILabel(frame: CGRect(x: <span style=color:#ae81ff>20</span>, y: <span style=color:#ae81ff>20</span>, width: <span style=color:#ae81ff>300</span>, height: <span style=color:#ae81ff>300</span>))
</span></span><span style=display:flex><span>        text.text = <span style=color:#e6db74>&#34;UIKit Preview Testing&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.view.addSubview(text)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#if</span> <span style=color:#75715e>DEBUG</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>SwiftUI</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ViewControllerRepresentable</span>: UIViewControllerRepresentable {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>typealias</span> UIViewControllerType = ViewController
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>makeUIViewController</span>(context: Context) -&gt; UIViewControllerType {
</span></span><span style=display:flex><span>        ViewController()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>updateUIViewController</span>(<span style=color:#66d9ef>_</span> uiViewController: UIViewControllerType, context: Context) {
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ViewController_Previews</span>: PreviewProvider {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>var</span> previews: some View {
</span></span><span style=display:flex><span>        ViewControllerRepresentable()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=swift-guard>Swift Guard</h3><blockquote><p><a href=https://www.cnblogs.com/xuruofan/p/9967754.html>关于swift的guard使用一定要慎用</a></p><p>使用if判断保护的变量，使用返回仅限于if的括号范围内，这就导致使用这个变量的代码，只能写在if括号范围之内，十分不方便，也不够优美。对，不够优美，但这并不表示可以随便使用guard这个关键字，因为，因为&mldr;.上代码。</p><p>在for，while，do-while等循环语句中使用guard，一旦变量不存在，就会直接跳出函数方法，导致剩下循环没办法进行，当程序使用数组的时候，容易造成数组越界，从而发生crash，这个问题很低级，但是我确实脑抽的发生了，造成很严重的后果，所以，写这边博客，一是记录一下自己的错误，二是提醒其他iOS开发者，尽量避免与我同样的错误。</p></blockquote><h2 id=swift-repl>Swift REPL</h2><blockquote><ul><li><a href="https://developer.apple.com/swift/blog/?id=18">Introduction to the Swift REPL</a></li><li><a href="https://developer.aliyun.com/article/254323?spm=a2c6h.13262185.profile.355.699e167e7REVuk">Swift REPL简介 - Translation</a></li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>Arrow Keys		Move cursor left/right/up/down
</span></span><span style=display:flex><span>Control+F		Move cursor right one character, same as right arrow
</span></span><span style=display:flex><span>Control+B		Move cursor left one character, same as left arrow
</span></span><span style=display:flex><span>Control+N		Move cursor to end of next line, same as down arrow
</span></span><span style=display:flex><span>Control+P		Move cursor to end of prior line, same as up arrow
</span></span><span style=display:flex><span>Control+D		Delete the character under the cursor
</span></span><span style=display:flex><span>Option+Left		Move cursor to start of prior word
</span></span><span style=display:flex><span>Option+Right	Move cursor to start of next word
</span></span><span style=display:flex><span>Control+A		Move cursor to start of current line
</span></span><span style=display:flex><span>Control+E		Move cursor to end of current line
</span></span><span style=display:flex><span>Delete			Delete the character to the left of the cursor
</span></span><span style=display:flex><span>Esc &lt;			Move cursor to start of first line
</span></span><span style=display:flex><span>Esc &gt;			Move cursor to end of last line
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>箭头键                   将光标向左/右/上/下移动
</span></span><span style=display:flex><span>Control+F               将光标向右移动一个字符
</span></span><span style=display:flex><span>Control+B               将光标向左移动一个字符
</span></span><span style=display:flex><span>Control+N               将光标移动到下一行
</span></span><span style=display:flex><span>Control+P               将光标移动到上一行
</span></span><span style=display:flex><span>Control+D               删除被光标选中的字符
</span></span><span style=display:flex><span>Option+Left             将光标移动到前一个单词的开始处
</span></span><span style=display:flex><span>Option+Right            将光标移动到下一个单词的开始处
</span></span><span style=display:flex><span>Control+A               将光标移动到当前行的开始处
</span></span><span style=display:flex><span>Control+E               将光标移动到当前行的结束处
</span></span><span style=display:flex><span>Delete                  删除光标左边的字符
</span></span><span style=display:flex><span>Esc &lt;                   将光标移动到第一行的开始处
</span></span><span style=display:flex><span>Esc &gt;                   将光标移动到最后一行的结束处
</span></span></code></pre></div><h2 id=enum>Enum</h2><blockquote><p><a href=https://www.jianshu.com/p/9c7a07163e5b>Swift Enum Usage</a></p><p>与OC不一样，Swift的枚举牛逼得多了，OC只能玩Int，他能玩：</p><blockquote><p>整型(Integer)
浮点数(Float Point)
字符串(String)
布尔类型(Boolean)</p></blockquote></blockquote><h3 id=enumeration-and-structures>Enumeration and Structures</h3><blockquote><p><a href=https://docs.swift.org/swift-book/documentation/the-swift-programming-language/guidedtour/#Enumerations-and-Structures>Docs.swift.org - A Swift Tour</a></p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Rank</span>: Int {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> ace = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> two, three, four, five, six, seven, eight, nine, ten
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> jack, queen, king
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>simpleDescription</span>() -&gt; String {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> <span style=color:#66d9ef>self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .ace:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;ace&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .jack:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;jack&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .queen:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;queen&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .king:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;king&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> String(<span style=color:#66d9ef>self</span>.rawValue)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> ace = Rank.ace
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> aceRawValue = ace.rawValue
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> convertedRank = Rank(rawValue: <span style=color:#ae81ff>3</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> threeDescription = convertedRank.simpleDescription()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Suit</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> spades, hearts, diamonds, clubs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>simpleDescription</span>() -&gt; String {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> <span style=color:#66d9ef>self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .spades:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;spades&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .hearts:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;hearts&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .diamonds:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;diamonds&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .clubs:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;clubs&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> hearts = Suit.hearts
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> heartsDescription = hearts.simpleDescription()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>ServerResponse</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> result(String, String)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> failure(String)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> success = ServerResponse.result(<span style=color:#e6db74>&#34;6:00 am&#34;</span>, <span style=color:#e6db74>&#34;8:09 pm&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> failure = ServerResponse.failure(<span style=color:#e6db74>&#34;Out of cheese.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> success {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> .result(sunrise, sunset):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Sunrise is at </span><span style=color:#e6db74>\(</span>sunrise<span style=color:#e6db74>)</span><span style=color:#e6db74> and sunset is at </span><span style=color:#e6db74>\(</span>sunset<span style=color:#e6db74>)</span><span style=color:#e6db74>.&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#66d9ef>let</span> .failure(message):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Failure...  </span><span style=color:#e6db74>\(</span>message<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// Prints &#34;Sunrise is at 6:00 am and sunset is at 8:09 pm.&#34;</span>
</span></span></code></pre></div><h3 id=method-and-property>Method and Property</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Device</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> iPad, iPhone, AppleTV, AppleWatch
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>Device</span>: CustomStringConvertible{
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>introduced</span>() -&gt; String {
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> <span style=color:#66d9ef>self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .iPad: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;iPad&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .iPhone: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;iPhone&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .AppleWatch: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;AppleWatch&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .AppleTV: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;AppleTV&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> description: String {
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> <span style=color:#66d9ef>self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .iPad: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;iPad&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .iPhone: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;iPhone&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .AppleWatch: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;AppleWatch&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .AppleTV: <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;AppleTV&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(Device.AppleTV.description)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(Device.iPhone.introduced())
</span></span></code></pre></div><h3 id=associated-value>Associated Value</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Trade</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> Buy(stock:String,amount:Int)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> Sell(stock:String,amount:Int)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> trade = Trade.Buy(stock: <span style=color:#e6db74>&#34;003100&#34;</span>, amount: <span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>switch</span> trade {
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .Buy(<span style=color:#66d9ef>let</span> stock,<span style=color:#66d9ef>let</span> amount):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;stock:</span><span style=color:#e6db74>\(</span>stock<span style=color:#e6db74>)</span><span style=color:#e6db74>,amount:</span><span style=color:#e6db74>\(</span>amount<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> .Sell(<span style=color:#66d9ef>let</span> stock,<span style=color:#66d9ef>let</span> amount):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;stock:</span><span style=color:#e6db74>\(</span>stock<span style=color:#e6db74>)</span><span style=color:#e6db74>,amount:</span><span style=color:#e6db74>\(</span>amount<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>    ()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>case .Buy(let stock, let amount) 和 case let .Buy(stock, amount) 的区别在于使用位置限定符（Positional Qualifiers）的位置不同。</p><p>在 case .Buy(let stock, let amount) 中，位置限定符 let 出现在变量名称之前，因此它们只能应用于该 case 语句中的变量。这种方式将限定符用于单个变量，可以使代码更加易读和明确。</p><p>在 case let .Buy(stock, amount) 中，位置限定符 let 出现在枚举 case 名称之前，因此它们将应用于该枚举 case 中的所有变量。这种方式将限定符用于整个 case，可以使代码更加简洁和紧凑。</p><p>在实际使用中，两种方式都是有效的，并且它们的区别并不影响代码的行为。选择使用哪种方式主要取决于您的个人偏好和代码风格。</p><h3 id=protocol>Protocol</h3><blockquote><p><a href=https://developer.apple.com/documentation/swift/customstringconvertible>CustomstringConvertible</a></p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Trade</span> :CustomStringConvertible{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> Buy(stock:String,amount:Int)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> Sell(stock:String,amount:Int)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> description: String {
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> <span style=color:#66d9ef>self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .Buy(<span style=color:#66d9ef>_</span>, <span style=color:#66d9ef>_</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Buy&#34;</span>
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .Sell(<span style=color:#66d9ef>_</span>, <span style=color:#66d9ef>_</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Sell&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(Trade.Buy(stock: <span style=color:#e6db74>&#34;003100&#34;</span>, amount: <span style=color:#ae81ff>100</span>).description)
</span></span><span style=display:flex><span><span style=color:#75715e>// Buy</span>
</span></span><span style=display:flex><span>print(Trade.Buy(stock: <span style=color:#e6db74>&#34;003100&#34;</span>, amount: <span style=color:#ae81ff>100</span>))
</span></span><span style=display:flex><span><span style=color:#75715e>// Buy</span>
</span></span></code></pre></div><blockquote><p><a href=https://stackoverflow.com/questions/24113126/how-to-get-the-name-of-enumeration-value-in-swift>How to get the name of enumeration value in Swift?</a></p></blockquote><p>Note that you can customise what is printed in each of these scenarios:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>City</span>: CustomStringConvertible {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> description: String {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;City </span><span style=color:#e6db74>\(</span>rawValue<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(city)
</span></span><span style=display:flex><span><span style=color:#75715e>// prints &#34;City 1&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>City</span>: CustomDebugStringConvertible {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> debugDescription: String {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;City (rawValue: </span><span style=color:#e6db74>\(</span>rawValue<span style=color:#e6db74>)</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>debugPrint(city)
</span></span><span style=display:flex><span><span style=color:#75715e>// prints &#34;City (rawValue: 1)&#34;</span>
</span></span></code></pre></div><h3 id=extesnsion>Extesnsion</h3><p>枚举也可以进行扩展。最明显的用例就是将枚举的case和method分离，这样阅读你的代码能够简单快速地消化掉enum内容，紧接着转移到方法定义:</p><p>Enum can also be extended. The most obvious use case is to separate the enum&rsquo;s case and method, so that you can quickly digest the contents of the enum, and then move on to the method definition:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Assets</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> ballRed, bouncer
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>Assets</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> stringValue: String {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> <span style=color:#66d9ef>self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .ballRed:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;ballRed&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .bouncer:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;bouncer&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=generics>Generics</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Rubbish</span>&lt;T&gt; {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> price(T)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>getPrice</span>() -&gt; T {
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> <span style=color:#66d9ef>self</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> .price(<span style=color:#66d9ef>let</span> value):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> value
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(Rubbish&lt;Int&gt;.price(<span style=color:#ae81ff>100</span>).getPrice())
</span></span><span style=display:flex><span><span style=color:#75715e>// 100</span>
</span></span></code></pre></div><h3 id=caseiterable>CaseIterable</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// https://stackoverflow.com/questions/26261011/how-to-choose-a-random-enumeration-value</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Ball</span>: String, CustomStringConvertible, CaseIterable {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> ballRed, ballBlue, ballCyan, ballGreen, ballGrey, ballPurple, ballYellow
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> description: String {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>self</span>.rawValue
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>randomBall</span>() -&gt; Ball {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>Self</span>.allCases.randomElement() ?? ballRed
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Weekday</span>: CaseIterable {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> sunday, monday, tuesday, wednesday, thursday, friday, saturday
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>random</span>&lt;G: RandomNumberGenerator&gt;(using generator: <span style=color:#66d9ef>inout</span> G) -&gt; Weekday {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Weekday.allCases.randomElement(using: &amp;generator)<span style=color:#f92672>!</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>random</span>() -&gt; Weekday {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> g = SystemRandomNumberGenerator()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Weekday.random(using: &amp;g)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=stride>Stride</h2><blockquote><ul><li><a href=https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/swift-3%E7%9A%84for%E8%BF%B4%E5%9C%88%E4%B8%8D%E5%8F%AA%E6%9C%83%E6%AF%8F%E6%AC%A1%E5%8A%A01-5d4d6e14197>讓 for 迴圈不只加 1 的 stride</a></li><li><a href=https://developer.apple.com/documentation/swift/stride(from:to:by:)><code>stride(from:to:by:)</code></a></li></ul></blockquote><p>例1: 從 0, 100, 200，一直加到 900。(每次加 100，不包含 1000)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>var</span> sum = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> stride(from: <span style=color:#ae81ff>0</span>, to: <span style=color:#ae81ff>1000</span>, by: <span style=color:#ae81ff>100</span>) {
</span></span><span style=display:flex><span>    sum = sum <span style=color:#f92672>+</span> i
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>例2: 從 0, 100, 200，一直加到 1000。(每次加 100，包含 1000)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>var</span> sum = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#66d9ef>in</span> stride(from: <span style=color:#ae81ff>0</span>, through: <span style=color:#ae81ff>1000</span>, by: <span style=color:#ae81ff>100</span>) {
</span></span><span style=display:flex><span>    sum = sum <span style=color:#f92672>+</span> i
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=lazy>Lazy</h2><blockquote><p>See more in <a href=../objc-snippet#swift--objc-lazy>objc-snippet</a></p></blockquote><h2 id=functionbuilder>functionBuilder</h2><blockquote><p><a href=https://www.hackingwithswift.com/plus/data-structures/trees>Trees in Swift</a></p></blockquote><h2 id=codable--nscoding>Codable & NSCoding</h2><blockquote><p><a href=https://www.jianshu.com/p/4876e94862e2>Swift Codable 和 NSCoding协议，以及归档，JSON编码</a></p></blockquote><p>前面文章中 UserDefaults 的基本用法 中对UserDefaults 进行了简单的介绍，它可以将一些简单的数据类型存储在本地，需要使用的时候再去读取。</p><p>如果对于复杂对象的存储则需要将其进行序列化，将对象转化为 NSData(Swift Data)类型之后再进行操作，比如，将其存在本地的某个文件（eg.people.plist, people.txt等）中。</p><p>有2种序列化的方式：</p><ol><li>NSCoding： 老的Cocoa方式，OC的方式</li><li>Codable： 新的swift方式</li></ol><h2 id=value-type-reference-type>Value type, Reference type</h2><p><a href=https://www.jianshu.com/p/d02ef86bbf79>Swift值类型&引用类型</a></p><p>Swift 中，值类型的赋值为深拷贝（Deep Copy），值语义（Value Semantics）即新对象和源对象是独立的，当改变新对象的属性，源对象不会受到影响，反之同理。</p><h2 id=difference-between-struct-and-class>Difference Between Struct and Class</h2><p><a href=https://www.hackingwithswift.com/quick-start/understanding-swift/>Understanding Swift</a></p><h3 id=q1-why-does-swift-have-both-classes-and-structs>Q1: <a href=https://www.hackingwithswift.com/quick-start/understanding-swift/why-does-swift-have-both-classes-and-structs>Why does Swift have both classes and structs?</a></h3><ul><li>Classes have deinitializers, which are methods that are called when an instance of the class is destroyed, but structs do not.</li><li>常量类中的变量属性可以自由修改，但常量结构中的变量属性不能。</li><li>Variable properties in constant classes can be modified freely, but variable properties in constant structs cannot.</li></ul><h3 id=q2-why-do-classes-have-deinitializers-and-structs-dont>Q2: <a href=https://www.hackingwithswift.com/quick-start/understanding-swift/why-do-classes-have-deinitializers-and-structs-dont>Why do classes have deinitializers and structs don’t?</a></h3><p>The job of deinitializers is to tell us when a class instance was destroyed. For structs this is fairly simple: the struct is destroyed when whatever owns it no longer exists. So, if we create a struct inside a method and the methods ends, the struct is destroyed.</p><p>So, the simple reason for why structs don’t have deinitializers is because they don’t need them: each struct has its own copy of its data, so nothing special needs to happen when it is destroyed.</p><p>You can put your deinitializer anywhere you want in your code, but I love this quote from Anne Cahalan: “Code should read like sentences, which makes me think my classes should read like chapters. So the deinitializer goes at the end, it&rsquo;s the <del>fin</del> of the class!”</p><h3 id=override>override</h3><p><a href=https://blog.csdn.net/qq_28091923/article/details/86529569>Swift中final、extension、override、@objc等关键字的使用</a></p><p>override 关键字在 Swift 中用来明确表示子类想要覆盖（或重写）父类的方法、属性或下标脚本。这个关键字提供了一种安全机制，如果你尝试覆盖的成员在父类中不存在，编译器将给出错误提示，避免了可能的误操作。</p><p>在 Objective-C 中，没有对应的 override 关键字。当你在子类中使用和父类相同的方法名定义方法时，Objective-C 会默认进行覆盖。这也意味着，在 Objective-C 中，如果你错误地拼写了想要覆盖的方法名，编译器将不会发出任何警告，这可能会导致意料之外的运行时行为。</p><p>所以，Swift 中的 override 关键字提供了额外的类型检查和安全性，可以在编译时就捕获可能的错误，这是它与 Objective-C 行为的一个主要区别。</p><h3 id=class-var-static-var>class var, static var</h3><p>class var 只能在类（class）中定义，不能在枚举（enum）和结构体（struct）中定义。另外，class var 只能定义计算属性，不能定义存储属性，但是它们可以被子类重写。</p><p>所以简单总结就是，如果你希望定义一个类型级别的存储属性，只能用 static var；如果你希望定义一个可被子类重写的类型级别的计算属性，可以用 class var。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>var</span> myVar: Int {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MySubClass</span>: MyClass {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>var</span> myVar: Int {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>84</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(MyClass.myVar) <span style=color:#75715e>// 输出 42</span>
</span></span><span style=display:flex><span>print(MySubClass.myVar) <span style=color:#75715e>// 输出 84</span>
</span></span></code></pre></div><p><a href="https://developer.apple.com/documentation/arkit/arconfiguration/2923553-issupported?language=objc"><code>@property(class, nonatomic, readonly) BOOL isSupported;</code></a></p><h2 id=c-c-integration>C, C++ Integration</h2><p><a href=https://glumes.com/post/ios/swift-call-c-function/>在 Swift 中去调用 C/C++ 代码</a></p><h3 id=cpp-integration>Cpp integration</h3><ol><li>Cpp File</li><li>Objective-C Wapper, .h .mm</li><li>Bridging-Header</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>// .hpp file
</span></span></span><span style=display:flex><span><span style=color:#75715e>#ifndef CppTest_hpp
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define CppTest_hpp
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;iostream&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CppTest</span> {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> test();
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#endif </span><span style=color:#75715e>/* CppTest_hpp */</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// .cpp file
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;CppTest.hpp&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> CppTest<span style=color:#f92672>::</span>test() {
</span></span><span style=display:flex><span>    printf(<span style=color:#e6db74>&#34;swift can call from Cpp&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#75715e>// .h file
</span></span></span><span style=display:flex><span><span style=color:#75715e>#import &lt;Foundation/Foundation.h&gt;
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NS_ASSUME_NONNULL_BEGIN
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>ObjCpp</span> : <span style=color:#a6e22e>NSObject</span>
</span></span><span style=display:flex><span>- (<span style=color:#66d9ef>void</span>)<span style=color:#a6e22e>run</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NS_ASSUME_NONNULL_END
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// .mm file
</span></span></span><span style=display:flex><span><span style=color:#75715e>#import &#34;ObjCpp.h&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>#import &#34;CppTest.hpp&#34;
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@implementation</span> <span style=color:#a6e22e>ObjCpp</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- (<span style=color:#66d9ef>void</span>)<span style=color:#a6e22e>run</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>auto</span> sp <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>make_shared<span style=color:#f92672>&lt;</span>CppTest<span style=color:#f92672>&gt;</span>();
</span></span><span style=display:flex><span>    sp<span style=color:#f92672>-&gt;</span>test();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#75715e>#import &#34;ObjCpp.h&#34;
</span></span></span></code></pre></div><h3 id=dylib-for-xcode-project>dylib for Xcode project</h3><p><a href=https://youtu.be/_BhDsxX7jmQ>Linking Homebrew Libraries in Xcode</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd opt/homebrew/include
</span></span><span style=display:flex><span><span style=color:#75715e># Header Search Paths</span>
</span></span></code></pre></div></article></html>