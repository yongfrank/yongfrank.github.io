<!doctype html><html lang=en-us><title>SwiftUI Example | Blog by Frank</title><meta charset=utf-8><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZQ6YTCMN7"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XZQ6YTCMN7",{anonymize_ip:!1})}</script><meta name=twitter:card content="summary_large_image"><meta property="og:type" content="article"><meta property="og:title" content="SwiftUI Example | Blog by Frank"><meta property="twitter:title" content="SwiftUI Example | Blog by Frank"><meta property="og:description" content="This page is open source. Improve this page."><meta property="og:url" content="https://yongfrank.github.io/posts/swiftui/"><meta property="og:site_name" content="Blog by Frank"><meta name=generator content="Hugo 0.111.3"><meta name=description content="Explorations, Reflections, and More on My Blog"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://yongfrank.github.io/css/index.css><link rel=canonical href=https://yongfrank.github.io/posts/swiftui/><link rel=alternate type=application/rss+xml href title="Blog by Frank"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#578490><meta name=msapplication-TileColor content="#da532c"><header><a href=https://yongfrank.github.io/ class=title>Blog by Frank</a><nav><a href=/about/>About</a></nav></header><article><header><h1>SwiftUI Example</h1><time datetime=2023-04-03T01:39:20+08:00>April 03, 2023</time></header><nav id=TableOfContents><ul><li><a href=#working-with-static-text-laying-out-text-neatly>Working with static text (Laying out text neatly)</a><ul><li><a href=#working-with-attributedstring>Working with AttributedString</a></li></ul></li><li><a href=#stacks-grids-scrollviews>Stacks, grids, scrollviews</a></li><li><a href=#user-interface-controls>User interface controls</a></li><li><a href=#responding-to-events>Responding to events</a></li><li><a href=#tap-and-gestures>Tap and gestures</a></li><li><a href=#advanced-state>Advanced state</a></li><li><a href=#lists>Lists</a></li><li><a href=#navigation>Navigation</a></li><li><a href=#alerts-and-menus>Alerts and menus</a></li><li><a href=#presenting-views>Presenting Views</a></li><li><a href=#transforming-views>Transforming views</a></li><li><a href=#drawing>Drawing</a></li><li><a href=#animation>Animation</a></li><li><a href=#composing-views>Composing views</a></li><li><a href=#cross-platform-swiftui>Cross-platform SwiftUI</a></li><li><a href=#preferencekey>PreferenceKey</a></li><li><a href=#uikit-integration>UIKit Integration</a></li></ul></nav><p>This page is open source. <a href=https://github.com/yongfrank/yongfrank.github.io/edit/main/content/posts/swiftui.md>Improve this page</a>.</p><blockquote><ul><li><a href=https://www.hackingwithswift.com/quick-start/swiftui/>SwiftUI by Example</a></li><li><a href=https://www.cocoaz.com/swiftui/swiftui-vs-uikit-cheat-sheet/>SwiftUI 参考手册</a></li></ul></blockquote><h2 id=working-with-static-text-laying-out-text-neatly>Working with static text (Laying out text neatly)</h2><blockquote><ul><li><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-add-advanced-text-styling-using-attributedstring>hws - How to add advanced text styling using AttributedString</a></li><li><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-render-markdown-content-in-text>hws - How to render Markdown content in text</a></li><li><a href=https://www.appcoda.com/swiftui-markdown/>Using Markdown in SwiftUI</a></li><li><a href=https://www.fatbobman.com/posts/attributedString/>AttributedString</a></li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> content: String? {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>? 
</span></span><span style=display:flex><span>            String(
</span></span><span style=display:flex><span>                contentsOf: Bundle.main.url(forResource: <span style=color:#e6db74>&#34;README&#34;</span>, withExtension: <span style=color:#e6db74>&#34;md&#34;</span>)<span style=color:#f92672>!</span>
</span></span><span style=display:flex><span>            )
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> txt: AttributedString {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> text = <span style=color:#66d9ef>try</span>! AttributedString(markdown: <span style=color:#e6db74>&#34;_Hamlet_ by William Shakespeare **Text in bold**&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> range = text.range(of: <span style=color:#e6db74>&#34;William&#34;</span>) {
</span></span><span style=display:flex><span>            text[range].backgroundColor = .yellow
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> text
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        VStack {
</span></span><span style=display:flex><span>            Text(content ?? <span style=color:#e6db74>&#34;?&#34;</span>)
</span></span><span style=display:flex><span>            Text(txt)
</span></span><span style=display:flex><span>            Text(<span style=color:#e6db74>&#34;**Text in bold**&#34;</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        .background(.red)
</span></span><span style=display:flex><span>        .padding()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This automatic Markdown conversion happens because SwiftUI interprets those strings as being instances of LocalizedStringKey – strings that can be localized by our app. This means if you want to create Markdown text from a property or variable, you should mark it explicitly as being LocalizedStringKey to get the Markdown rendering:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> markdownText: LocalizedStringKey = <span style=color:#e6db74>&#34;* This is **bold** text, this is *italic* text, and this is ***bold, italic*** text.&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        Text(markdownText)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=working-with-attributedstring>Working with AttributedString</h3><p><a href=https://www.hackingwithswift.com/quick-start/swiftui/>How to let users select text</a></p><p><img src=https://www.appcoda.com/wp-content/uploads/2022/03/swiftui-markdown-3.png alt="attributed string"></p><p>SwiftUI’s text component has a built-in support for AttributedString. You can simply pass it to the Text view for rendering.</p><h2 id=stacks-grids-scrollviews>Stacks, grids, scrollviews</h2><p>Position views in a structured way</p><blockquote><p><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-position-views-in-a-grid-using-lazyvgrid-and-lazyhgrid>hws - How to position views in a grid using LazyVGrid and LazyHGrid</a></p></blockquote><p><img src=https://www.hackingwithswift.com/img/books/quick-start/swiftui/how-to-position-views-in-a-grid-using-lazyvgrid-and-lazyhgrid-1@2x.png alt=LazyVGrid></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>SwiftUI</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> columnLayout = [GridItem(.adaptive(minimum: <span style=color:#ae81ff>100</span>, maximum: <span style=color:#ae81ff>100</span>))]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> allColors: [Color] = [.pink, .red, .orange, .yellow, .green, .mint, .teal, .cyan, .blue, .indigo, .purple, .brown, .gray]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        ScrollView {
</span></span><span style=display:flex><span>            LazyVGrid(columns: columnLayout) {
</span></span><span style=display:flex><span>                ForEach(allColors.indices, id: <span style=color:#960050;background-color:#1e0010>\</span>.<span style=color:#66d9ef>self</span>) { index <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>                    RoundedRectangle(cornerRadius: <span style=color:#ae81ff>4.0</span>)
</span></span><span style=display:flex><span>                        .aspectRatio(<span style=color:#ae81ff>1.0</span>, contentMode: ContentMode.fit)
</span></span><span style=display:flex><span>                        .foregroundColor(allColors[index])
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        .padding()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-dismiss-the-keyboard-when-the-user-scrolls>hws - How to dismiss the keyboard when the user scrolls</a></p></blockquote><p>SwiftUI’s scrollDismissesKeyboard() modifier gives us precise control over how the keyboard should dismiss when the user scrolls around.</p><p>For example, we could place a TextField and TextEditor into a scroll view, and have them both dismiss the keyboard interactively like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> username = <span style=color:#e6db74>&#34;Anonymous&#34;</span>
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> bio = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        ScrollView {
</span></span><span style=display:flex><span>            VStack {
</span></span><span style=display:flex><span>                TextField(<span style=color:#e6db74>&#34;Name&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>username)
</span></span><span style=display:flex><span>                    .textFieldStyle(.roundedBorder)
</span></span><span style=display:flex><span>                TextEditor(text: <span style=color:#960050;background-color:#1e0010>$</span>bio)
</span></span><span style=display:flex><span>                    .frame(height: <span style=color:#ae81ff>400</span>)
</span></span><span style=display:flex><span>                    .border(.quaternary, width: <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            .padding(.horizontal)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        .scrollDismissesKeyboard(.interactively)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>Use <code>.automatic</code> to let SwiftUI judge what’s the best thing to do based on the context of the scroll.</li><li>Use <code>.immediately</code> to make the keyboard dismiss fully as soon as any scroll happens.</li><li>Use <code>.interactively</code> to make the keyboard dismiss inline with the user’s gesture – they need to scroll further to make it dismiss fully.</li><li>Use <code>.never</code> if you want the keyboard to remain present during scrolling.</li></ul><h2 id=user-interface-controls>User interface controls</h2><p>Respond to interaction and control your program state</p><blockquote><p><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-customize-the-submit-button-for-textfield-securefield-and-texteditor>How to customize the submit button for TextField, SecureField, and TextEditor</a></p></blockquote><p><img src=https://www.hackingwithswift.com/img/books/quick-start/swiftui/how-to-customize-the-submit-button-for-textfield-securefield-and-texteditor-1@2x.png alt="keyboard customize"></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> username = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        TextField(<span style=color:#e6db74>&#34;Username&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>username)
</span></span><span style=display:flex><span>            .submitLabel(.join)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><ul><li><a href=https://sarunw.com/posts/swiftui-multiline-textfield/>How to create multiline TextField in SwiftUI</a></li><li><a href=https://stackoverflow.com/questions/58210457/make-the-textfield-multiline-swiftui>iOS 16.0+ supprts multiline TextField.</a></li></ul></blockquote><p>axis: .horizontal will yield the same result as a normal text field.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>MultilineTextFieldExample</span>: View {
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>var</span> address = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {        
</span></span><span style=display:flex><span>        TextField(<span style=color:#e6db74>&#34;Address&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>address, axis: .vertical)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            .textFieldStyle(.roundedBorder)
</span></span><span style=display:flex><span>            .padding()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><ul><li>How to make a TextField or TextEditor have default focus</li><li><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-dismiss-the-keyboard-for-a-textfield>hws - How to dismiss the keyboard for a TextField</a></li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> name = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    @FocusState <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> nameIsFocused: Bool
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        VStack {
</span></span><span style=display:flex><span>            TextField(<span style=color:#e6db74>&#34;Enter your name&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>name)
</span></span><span style=display:flex><span>                .focused(<span style=color:#960050;background-color:#1e0010>$</span>nameIsFocused)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            Button(<span style=color:#e6db74>&#34;Submit&#34;</span>) {
</span></span><span style=display:flex><span>                nameIsFocused = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><ul><li><a href=https://developer.apple.com/documentation/swiftui/toolbaritemplacement/keyboard>Apple Developers - Keyboard toolbar</a></li><li><a href=https://stackoverflow.com/questions/56491386/how-to-hide-keyboard-when-using-swiftui>How to hide keyboard when using SwiftUI?</a></li><li><a href=https://swiftwithmajid.com/2021/03/03/focusedvalue-and-focusedbinding-property-wrappers-in-swiftui/>FocusedValue and FocusedBinding property wrappers in SwiftUI</a></li><li><a href=https://www.kodeco.com/31569019-focus-management-in-swiftui-getting-started>Focus Management in SwiftUI: Getting Started</a></li></ul></blockquote><p><img src=https://i.stack.imgur.com/7oFYC.gif alt="keyboard toolbar"></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// ♣️♥️♠️♦️ appear above the keyboard</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Field</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> suit
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> rank
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>FieldKey</span>: FocusedValueKey {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>typealias</span> Value = Field
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>FocusedValues</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> field: Field? {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>get</span> { <span style=color:#66d9ef>self</span>[FieldKey.<span style=color:#66d9ef>self</span>] }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>set</span> { <span style=color:#66d9ef>self</span>[FieldKey.<span style=color:#66d9ef>self</span>] = newValue }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>KeyboardBarDemo</span>: View {
</span></span><span style=display:flex><span>    @FocusedValue(<span style=color:#960050;background-color:#1e0010>\</span>.field) <span style=color:#66d9ef>var</span> field: Field?
</span></span><span style=display:flex><span>    @FocusState <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> focusedField: Field?
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> suitText = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> rankText = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        HStack {
</span></span><span style=display:flex><span>            TextField(<span style=color:#e6db74>&#34;Suit&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>suitText)
</span></span><span style=display:flex><span>                .focusedValue(<span style=color:#960050;background-color:#1e0010>\</span>.field, .suit)
</span></span><span style=display:flex><span>                .focused(<span style=color:#960050;background-color:#1e0010>$</span>focusedField, equals: .suit)
</span></span><span style=display:flex><span>                .textFieldStyle(.roundedBorder)
</span></span><span style=display:flex><span>            TextField(<span style=color:#e6db74>&#34;Rank&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>rankText)
</span></span><span style=display:flex><span>                .focusedValue(<span style=color:#960050;background-color:#1e0010>\</span>.field, .rank)
</span></span><span style=display:flex><span>                .focused(<span style=color:#960050;background-color:#1e0010>$</span>focusedField, equals: .rank)
</span></span><span style=display:flex><span>                .textFieldStyle(.roundedBorder)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        .toolbar {
</span></span><span style=display:flex><span>            ToolbarItemGroup(placement: .keyboard) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> field == .suit {
</span></span><span style=display:flex><span>                    Button(<span style=color:#e6db74>&#34;♣️&#34;</span>, action: { <span style=color:#66d9ef>self</span>.suitText <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;♣️&#34;</span> })
</span></span><span style=display:flex><span>                    Button(<span style=color:#e6db74>&#34;♥️&#34;</span>, action: { <span style=color:#66d9ef>self</span>.suitText <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;♥️&#34;</span> })
</span></span><span style=display:flex><span>                    Button(<span style=color:#e6db74>&#34;♠️&#34;</span>, action: { <span style=color:#66d9ef>self</span>.suitText <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;♠️&#34;</span> })
</span></span><span style=display:flex><span>                    Button(<span style=color:#e6db74>&#34;♦️&#34;</span>, action: { <span style=color:#66d9ef>self</span>.suitText <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;♦️&#34;</span> })
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                Spacer()
</span></span><span style=display:flex><span>                Button(<span style=color:#e6db74>&#34;Done&#34;</span>) {
</span></span><span style=display:flex><span>                    focusedField = <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p><a href=https://www.hackingwithswift.com/forums/100-days-of-swift/adding-a-clear-button-to-a-textfield/12079>Adding a clear button to a TextField</a></p></blockquote><p>Just an update for this. If you add this modifier to TextField then you get the clear button.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>TextField(<span style=color:#e6db74>&#34;regex&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>regexResearch, axis: .vertical)
</span></span><span style=display:flex><span>    .onAppear {
</span></span><span style=display:flex><span>        UITextField.appearance().clearButtonMode = .whileEditing
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h2 id=responding-to-events>Responding to events</h2><h2 id=tap-and-gestures>Tap and gestures</h2><blockquote><ul><li><a href=https://stackoverflow.com/questions/62733633/swiftui-tapgesture-and-longpressgesture-in-scrollview-with-tap-indication-not-wo>stackoverflow - SwiftUI TapGesture and LongPressGesture in ScrollView with tap indication not working</a></li><li><a href=https://developer.apple.com/forums/thread/127277>Apple Developers - Longpress and list scrolling</a></li></ul><p>Thank you very much for pointing this out. It solved my problem. I didn&rsquo;t considder having an empty onTapGesture handler would have any impact on the scrolling, but it does. Maybe the common use is to have the tap handler and then add longtap as an additional gesture (makes sense).
Thanks again :-)</p></blockquote><h2 id=advanced-state>Advanced state</h2><p>Learn how to bind objects and query the environment</p><blockquote><p><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-use-observedobject-to-manage-state-from-external-objects>How to use @ObservedObject to manage state from external objects</a></p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserProgress</span>: ObservableObject {
</span></span><span style=display:flex><span>    @Published <span style=color:#66d9ef>var</span> score = <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>didSet</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> score <span style=color:#f92672>&gt;</span> highScore {
</span></span><span style=display:flex><span>                highScore = score
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @AppStorage(<span style=color:#e6db74>&#34;HighScore&#34;</span>) <span style=color:#66d9ef>var</span> highScore = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>InnerView</span>: View {
</span></span><span style=display:flex><span>    @ObservedObject <span style=color:#66d9ef>var</span> progress: UserProgress
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        Button(<span style=color:#e6db74>&#34;Increase Score&#34;</span>) {
</span></span><span style=display:flex><span>            progress.score <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    @StateObject <span style=color:#66d9ef>var</span> progress = UserProgress()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        VStack {
</span></span><span style=display:flex><span>            Text(<span style=color:#e6db74>&#34;Your score is </span><span style=color:#e6db74>\(</span>progress.score<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>            InnerView(progress: progress)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=lists>Lists</h2><p>Create scrolling tables of data</p><ul><li><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-add-a-search-bar-to-filter-your-data>How to add a search bar to filter your data</a></li></ul><h2 id=navigation>Navigation</h2><p>Direct your user through data in your app</p><ul><li><a href=https://nilcoalescing.com/blog/ProgrammaticallyHideAndShowSidebarInSplitView/>Programmatically hide and show sidebar in split view</a></li><li><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-hide-and-show-the-sidebar-programmatically>How to hide and show the sidebar programmatically</a></li><li><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-customize-a-views-width-in-navigationsplitview>How to customize a view’s width in NavigationSplitView</a></li></ul><h2 id=alerts-and-menus>Alerts and menus</h2><blockquote><p><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-recommend-another-app-using-appstoreoverlay>How to recommend another app using appStoreOverlay()</a></p></blockquote><video width=100% src=https://www.hackingwithswift.com/img/books/quick-start/swiftui/how-to-recommend-another-app-using-appstoreoverlay-1.mp4 autoplay loop></video><h2 id=presenting-views>Presenting Views</h2><p>Move your user from one view to another</p><h2 id=transforming-views>Transforming views</h2><p>Clip, size, scale, spin, and more</p><h2 id=drawing>Drawing</h2><p>Take control of rendering using custom shapes</p><h2 id=animation>Animation</h2><p>Bring your views to life with movement</p><blockquote><p><a href=https://www.hackingwithswift.com/quick-start/swiftui/how-to-add-and-remove-views-with-a-transition>How to add and remove views with a transition</a></p></blockquote><video src=https://www.hackingwithswift.com/img/books/quick-start/swiftui/how-to-add-and-remove-views-with-a-transition-1.mp4 width=100% autoplay loop autopictureinpicture></video><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> showDetails = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        VStack {
</span></span><span style=display:flex><span>            Button(<span style=color:#e6db74>&#34;Press to show details&#34;</span>) {
</span></span><span style=display:flex><span>                withAnimation {
</span></span><span style=display:flex><span>                    showDetails.toggle()
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> showDetails {
</span></span><span style=display:flex><span>                Text(<span style=color:#e6db74>&#34;Details go here.&#34;</span>)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p><a href=https://designcode.io/swiftui-handbook-view-transition>View Transitions and Animations</a></p><p>To show a new view with transition, you can use the if statement with a show boolean state. On that new view, apply a transition modifier. The zIndex modifier ensures that when dismissing, the new view stays on top.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>@State <span style=color:#66d9ef>var</span> show = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>ZStack {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>!</span>show {
</span></span><span style=display:flex><span>        Text(<span style=color:#e6db74>&#34;View transition&#34;</span>)
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        VStack { Text(<span style=color:#e6db74>&#34;New View&#34;</span>) }
</span></span><span style=display:flex><span>            .transition(.move(edge: .bottom))
</span></span><span style=display:flex><span>            .zIndex(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>.onTapGesture {
</span></span><span style=display:flex><span>    show.toggle()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=composing-views>Composing views</h2><p>Make your UI structure easier to understand</p><h2 id=cross-platform-swiftui>Cross-platform SwiftUI</h2><p>learn</p><blockquote><ul><li><a href=https://stackoverflow.com/questions/38894031/swift-how-to-detect-orientation-changes>Swift - How to detect orientation changes</a></li><li><a href=https://zhuanlan.zhihu.com/p/568441109>SwiftUI如何在iOS16中优雅的检测和适配横竖屏 - 青颜君的文章 - 知乎</a></li><li><a href=https://developer.apple.com/documentation/swiftui/food_truck_building_a_swiftui_multiplatform_app>Food Truck: Building a SwiftUI multiplatform app</a></li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// Deprecated</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>guard</span> <span style=color:#66d9ef>let</span> orientation = UIApplication.shared.windows.first?.windowScene?.interfaceOrientation 
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span> { <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> orientation == .landscapeRight <span style=color:#f92672>||</span> orientation == .landscapeLeft {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Food Truck By Apple</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#if</span> <span style=color:#75715e>os</span>(<span style=color:#75715e>iOS</span>)
</span></span><span style=display:flex><span>@Environment (<span style=color:#960050;background-color:#1e0010>\</span>.verticalSizeClass) <span style=color:#66d9ef>var</span> verticalSizeClass
</span></span><span style=display:flex><span>@Environment(<span style=color:#960050;background-color:#1e0010>\</span>.horizontalSizeClass) <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> sizeClass
</span></span><span style=display:flex><span><span style=color:#75715e>#endif</span>
</span></span><span style=display:flex><span>@Environment(<span style=color:#960050;background-color:#1e0010>\</span>.dynamicTypeSize) <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> dynamicType
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>isCompact</span>(width: Double) -&gt; Bool {
</span></span><span style=display:flex><span>    <span style=color:#75715e>#if</span> <span style=color:#75715e>os</span>(<span style=color:#75715e>iOS</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>self</span>.sizeClass == .compact {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> verticalSizeClass == .compact {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#75715e>#endif</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>self</span>.<span style=color:#66d9ef>dynamicType</span> <span style=color:#f92672>&gt;=</span> dynamicTypeThreshold {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> width <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>self</span>.widthThreshold {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><table><thead><tr><th>Device</th><th>Landscape/Portrait</th><th>horizontalSizeClass</th><th>verticalSizeClass</th></tr></thead><tbody><tr><td>All iPhone</td><td>Portrait</td><td>compact</td><td>regular</td></tr><tr><td>iPhone (except Max、Plus)</td><td>Landscape</td><td>compact</td><td>compact</td></tr><tr><td>iPhone (Max、Plus)</td><td>Landscape</td><td>regular</td><td>compact</td></tr><tr><td>All iPad</td><td>Landscape & Portrait</td><td>regular</td><td>regular</td></tr></tbody></table><table><thead><tr><th>设备</th><th>横/竖屏</th><th>horizontalSizeClass</th><th>verticalSizeClass</th></tr></thead><tbody><tr><td>所有 iPhone</td><td>竖屏</td><td>compact</td><td>regular</td></tr><tr><td>iPhone (Max、Plus 除外)</td><td>横屏</td><td>compact</td><td>compact</td></tr><tr><td>iPhone (Max、Plus)</td><td>横屏</td><td>regular</td><td>compact</td></tr><tr><td>所有 iPad</td><td>横、竖屏</td><td>regular</td><td>regular</td></tr></tbody></table><h2 id=preferencekey>PreferenceKey</h2><blockquote><p><a href=https://www.appcoda.com.tw/swiftui-preferencekey/>SwiftUI 小技巧：透過 PreferenceKey 簡單對齊視圖</a></p></blockquote><p><img src=https://www.appcoda.com.tw/content/images/2019/12/1_QY4RlNdXQUq5owuQqrwvEw.png alt="before preference key"></p><p><img src=https://www.appcoda.com.tw/content/images/2019/12/1_wkJwKpz4CqmWmirN4uRYpg.png alt="after preference key"></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>SwiftUI</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ContentView</span>: View {
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>var</span> value1 = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>var</span> value2 = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>var</span> value3 = <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    @State <span style=color:#66d9ef>var</span> width: CGFloat? = <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        Form {
</span></span><span style=display:flex><span>            HStack {
</span></span><span style=display:flex><span>                Text(<span style=color:#e6db74>&#34;First Item&#34;</span>)
</span></span><span style=display:flex><span>                    .frame(width: width, alignment: .leading)
</span></span><span style=display:flex><span>                    .background(ColumnWidthEqualiserView())
</span></span><span style=display:flex><span>                TextField(<span style=color:#e6db74>&#34;Enter first item&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>value1)
</span></span><span style=display:flex><span>                    .textFieldStyle(RoundedBorderTextFieldStyle())
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            HStack {
</span></span><span style=display:flex><span>                Text(<span style=color:#e6db74>&#34;Second Item&#34;</span>)
</span></span><span style=display:flex><span>                    .frame(width: width, alignment: .leading)
</span></span><span style=display:flex><span>                    .background(ColumnWidthEqualiserView())
</span></span><span style=display:flex><span>                TextField(<span style=color:#e6db74>&#34;Enter second item&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>value2)
</span></span><span style=display:flex><span>                    .textFieldStyle(RoundedBorderTextFieldStyle())
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            HStack {
</span></span><span style=display:flex><span>                Text(<span style=color:#e6db74>&#34;Final  Item&#34;</span>)
</span></span><span style=display:flex><span>                    .frame(width: width, alignment: .leading)
</span></span><span style=display:flex><span>                    .background(ColumnWidthEqualiserView())
</span></span><span style=display:flex><span>                TextField(<span style=color:#e6db74>&#34;Enter third item&#34;</span>, text: <span style=color:#960050;background-color:#1e0010>$</span>value3)
</span></span><span style=display:flex><span>                    .textFieldStyle(RoundedBorderTextFieldStyle())
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }.modifier(ColumnWidth(width:<span style=color:#960050;background-color:#1e0010>$</span>width))
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ColumnWidthPreference</span>: Equatable {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> width: CGFloat
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ColumnWidthPreferenceKey</span>: PreferenceKey {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>typealias</span> Value = [ColumnWidthPreference]
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>var</span> defaultValue: [ColumnWidthPreference] = []
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>reduce</span>(value: <span style=color:#66d9ef>inout</span> [ColumnWidthPreference], nextValue: () -&gt; [ColumnWidthPreference]) {
</span></span><span style=display:flex><span>        value.append(contentsOf: nextValue())
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ColumnWidthEqualiserView</span>: View {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> body: some View {
</span></span><span style=display:flex><span>        GeometryReader { geometry <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            Rectangle()
</span></span><span style=display:flex><span>                .fill(Color.clear)
</span></span><span style=display:flex><span>                .preference(
</span></span><span style=display:flex><span>                    key: ColumnWidthPreferenceKey.<span style=color:#66d9ef>self</span>,
</span></span><span style=display:flex><span>                    value: [ColumnWidthPreference(width: geometry.frame(<span style=color:#66d9ef>in</span>: CoordinateSpace.global).width)]
</span></span><span style=display:flex><span>                )
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>ColumnWidth</span>: ViewModifier {
</span></span><span style=display:flex><span>    @Binding <span style=color:#66d9ef>var</span> width: CGFloat?
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>body</span>(content: Content) -&gt; some View {
</span></span><span style=display:flex><span>        content
</span></span><span style=display:flex><span>            .onPreferenceChange(ColumnWidthPreferenceKey.<span style=color:#66d9ef>self</span>) { preferences <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> p <span style=color:#66d9ef>in</span> preferences {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>let</span> oldWidth = <span style=color:#66d9ef>self</span>.width ?? CGFloat.zero
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> p.width <span style=color:#f92672>&gt;</span> oldWidth {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>self</span>.width = p.width <span style=color:#f92672>+</span> <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=uikit-integration>UIKit Integration</h2><blockquote><p><a href=https://zhuanlan.zhihu.com/p/133444068>访问 SwiftUI 内部的 UIKit 组件 - 猫克杯的文章 - 知乎</a></p></blockquote></article></html>